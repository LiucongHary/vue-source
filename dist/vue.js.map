{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isObject(obj) {\r\n  return typeof obj === 'object' && obj !== null\r\n}","import { isObject } from '../utils.js'\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    this.walk(data); // 可以对数据一步一步的处理\r\n  }\r\n  walk(data) {\r\n    // 对象循环 data:{msg:'zf',age:11}\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data, key, data[key]); // 定义响应式数据的变化\r\n    })\r\n\r\n  }\r\n}\r\n\r\n// vue2 的性能 递归重写get和set  vue3 proxy\r\nfunction defineReactive(data, key, value) {\r\n  observe(value); // 如果传入的值还是一个对象的话 就做递归循环检测\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) return\r\n      observe(newValue) // 监控当前设置的值，有可能用户给了一个新值\r\n      value = newValue\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  // 对象是通过使用 defineProperty 来实现响应式原理\r\n\r\n  // 如果这个数据不是对象 或者是null 那就不用监控了\r\n\r\n  if (!isObject(data)) {\r\n    return\r\n  }\r\n\r\n  // 对数据进行 defineProperty\r\n  return new Observer(data) // 可以看到当前数据是否被观测过\r\n} ","import {observe} from './observe/index.js'\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n  if (opts.props) {\r\n    initProps(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethod(vm);\r\n  }\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n}\r\n\r\nfunction initProps() { }\r\nfunction initMethod() { }\r\nfunction initData(vm) {\r\n  // 数据响应式原理\r\n  let data = vm.$options.data; //用户传入的数据\r\n  // vm._data 就是检测后的数据\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data;\r\n  // 观测数据\r\n  observe(data); //观测这个数据\r\n}","import {initState} from './state.js'\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    // Vue的内部 $options 就是用户传递的所有参数\r\n    const vm = this;\r\n    vm.$options = options; // 用户传入的参数\r\n\r\n    initState(vm); // 初始化状态\r\n  }\r\n}","\r\nimport {initMixin} from './init.js'\r\n\r\nfunction Vue(options) {\r\n    // 内部要进行初始化的操作\r\n    this._init(options); //初始化操作\r\n}\r\n\r\ninitMixin(Vue); //添加原型上的方法\r\n\r\nexport default Vue;"],"names":["isObject","obj","Observer","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","props","methods","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;EAC5B,SAAO,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;EACD;;MCAKC;EACJ,oBAAYC,IAAZ,EAAkB;EAAA;;EAChB,SAAKC,IAAL,CAAUD,IAAV,EADgB;EAEjB;;;;2BACIA,MAAM;EACT;EACAE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG,EAAI;EAC/BC,QAAAA,cAAc,CAACN,IAAD,EAAOK,GAAP,EAAYL,IAAI,CAACK,GAAD,CAAhB,CAAd,CAD+B;EAEhC,OAFD;EAID;;;;;;;EAIH,SAASC,cAAT,CAAwBN,IAAxB,EAA8BK,GAA9B,EAAmCE,KAAnC,EAA0C;EACxCC,EAAAA,OAAO,CAACD,KAAD,CAAP,CADwC;;EAExCL,EAAAA,MAAM,CAACO,cAAP,CAAsBT,IAAtB,EAA4BK,GAA5B,EAAiC;EAC/BK,IAAAA,GAD+B,iBACzB;EACJ,aAAOH,KAAP;EACD,KAH8B;EAI/BI,IAAAA,GAJ+B,eAI3BC,QAJ2B,EAIjB;EACZ,UAAIA,QAAQ,KAAKL,KAAjB,EAAwB;EACxBC,MAAAA,OAAO,CAACI,QAAD,CAAP,CAFY;;EAGZL,MAAAA,KAAK,GAAGK,QAAR;EACD;EAR8B,GAAjC;EAUD;;EAEM,SAASJ,OAAT,CAAiBR,IAAjB,EAAuB;EAC5B;EAEA;EAEA,MAAI,CAACH,QAAQ,CAACG,IAAD,CAAb,EAAqB;EACnB;EACD,GAP2B;;;EAU5B,SAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP,CAV4B;EAW7B;;ECvCM,SAASa,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,OAAT,EAAkB;;EAGlB,MAAIH,IAAI,CAACf,IAAT,EAAe;EACbmB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;EACF;;EAID,SAASK,QAAT,CAAkBL,EAAlB,EAAsB;EACpB;EACA,MAAId,IAAI,GAAGc,EAAE,CAACE,QAAH,CAAYhB,IAAvB,CAFoB;EAGpB;;EACAA,EAAAA,IAAI,GAAGc,EAAE,CAACM,KAAH,GAAW,OAAOpB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACqB,IAAL,CAAUP,EAAV,CAA7B,GAA6Cd,IAA/D,CAJoB;;EAMpBQ,EAAAA,OAAO,CAACR,IAAD,CAAP,CANoB;EAOrB;;ECtBM,SAASsB,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC;EACA,QAAMZ,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd,CAHuC;;EAKvCb,IAAAA,SAAS,CAACC,EAAD,CAAT,CALuC;EAMxC,GAND;EAOD;;ECPD,SAASS,GAAT,CAAaG,OAAb,EAAsB;EAClB;EACA,OAAKD,KAAL,CAAWC,OAAX,EAFkB;;EAGrB;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}